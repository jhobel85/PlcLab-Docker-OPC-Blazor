@inherits LayoutComponentBase

@using PlcLab.OPC
@using PlcLab.Web.Pages
@using PlcLab.Infrastructure
@using PlcLab.Web.Components
@using Microsoft.AspNetCore.Components.Web
@using Microsoft.JSInterop
@using PlcLab.Web.ViewModel
@using Microsoft.AspNetCore.Components

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
<link href="/site.css" rel="stylesheet">

@inject IndexViewModel _vm

@code {
    protected override void OnInitialized()
    {
      _vm.StatusChanged += StateHasChanged;
      // Do NOT connect automatically on page load
    }
}

<CascadingValue Value="_vm">
  <div class="container py-4">
    <h3>PlcLab</h3>
    <ConnectionBar />
    <hr />
    @Body
  </div>
</CascadingValue>

<script src="_framework/blazor.server.js"></script> <!-- Blazor Server script to support interactivity-->
